<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Evaluating the Spread and Control of Zebra Mussels in U.S. Waterways</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="Evaluating the Spread and Control of Zebra Mussels in U.S. Waterways">
<meta name="citation_author" content="Brittany Bobb">
<meta name="citation_author" content="Louisa Beckett">
<meta name="citation_author" content="Tayler Kordiak">
<meta name="citation_author" content="Austin Sharrah">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Benthic;,citation_author=undefined Merriam-Webster;,citation_fulltext_html_url=https://www.merriam-webster.com/dictionary/benthic;,citation_publisher=In &amp;amp;amp;lt;i&amp;gt;Merriam-Webster.com dictionary&amp;lt;/i&amp;gt;;">
<meta name="citation_reference" content="citation_title=Impacts of zebra mussels on aquatic communities and their role as ecosystem engineers;,citation_author=A. Y. Karatayev;,citation_author=L. E. Burlakova;,citation_author=D. K. Padilla;,citation_editor=E. Leppäkoski;,citation_editor=S. Gollasch;,citation_editor=S. Olenin;,citation_publication_date=2002;,citation_cover_date=2002;,citation_year=2002;,citation_fulltext_html_url=https://doi.org/10.1007/978-94-015-9956-6_43;,citation_doi=10.1007/978-94-015-9956-6_43;,citation_inbook_title=Invasive aquatic species of europe: Distribution, impacts, and management;">
<meta name="citation_reference" content="citation_title=Invasive zebra mussels;,citation_author=S. Knoch;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://www.nps.gov/articles/zebra-mussels.htm;">
<meta name="citation_reference" content="citation_title=Prevent the spread of mussels;,citation_author=California State Water Resources Control Board;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://water.ca.gov/News/Blog/2019/May-2019/Prevent-the-Spread-of-Mussels;">
<meta name="citation_reference" content="citation_title=What are zebra mussels and why should we care about them?;,citation_author=U. S. Geological Survey;,citation_publication_date=2025;,citation_cover_date=2025;,citation_year=2025;,citation_fulltext_html_url=https://www.usgs.gov/faqs/what-are-zebra-mussels-and-why-should-we-care-about-them;">
<meta name="citation_reference" content="citation_title=Copper treatment shows promise to control zebra mussel density in lakes;,citation_author=Minnesota Lakes &amp;amp;amp; Rivers Advocates;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_publisher=https://mnlakesandrivers.org/copper-treatment-shows-promise-to-control-zebra-mussel-density-in-lakes/;">
<meta name="citation_reference" content="citation_title=Impacts of zebra mussels on aquatic communities and their role as ecosystem engineers;,citation_author=Alexander Y. Karatayev;,citation_author=Lyubov E. Burlakova;,citation_author=Dianna K. Padilla;,citation_publication_date=2002;,citation_cover_date=2002;,citation_year=2002;,citation_fulltext_html_url=https://doi.org/10.1007/978-94-015-9956-6_43;,citation_doi=10.1007/978-94-015-9956-6_43;,citation_inbook_title=Invasive aquatic species of europe. Distribution, impacts and management;">
<meta name="citation_reference" content="citation_title=EarthTec&amp;amp;amp;lt;sup&amp;gt;&amp;lt;/sup&amp;gt; QZ;,citation_author=Univar Solutions;,citation_publisher=https://www.univarsolutions.com/product-categories/solvents/additional-solvents/earthtec-qz;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Evaluating the Spread and Control of Zebra Mussels in U.S. Waterways</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Authors</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Brittany Bobb </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Louisa Beckett </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Tayler Kordiak </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Austin Sharrah </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<p><strong>Lab 7 Final Project Document: Intro and Methods Draft</strong></p>
<p><em>Introduction:</em></p>
<p>Author: Tayler Kordiak</p>
<p>Zebra mussels (Dreissena polymorpha) are an aggressive bivalve invasive species that dominate and alter the freshwater ecosystems they invade. This benthic species, meaning living on the bottom of a body of water <span class="citation" data-cites="merriamwebster_benthic">(<a href="#ref-merriamwebster_benthic" role="doc-biblioref">Merriam-Webster n.d.</a>)</span>, often affects trophic levels by destroying ecosystem processes <span class="citation" data-cites="karatayev2002impacts">(<a href="#ref-karatayev2002impacts" role="doc-biblioref">Karatayev, Burlakova, and Padilla 2002</a>)</span>. Some ecosystem processes that are affected include oxygen and nutrient availability, sedimentation rates, and increased water temperature which can lead to a reduction of native species, due to outcompeting, that are detrimental to the freshwater ecosystems they belong to. Along with affecting the lake species, it also causes human problems economically and recreationally. Zebra mussels coined the term “biofouling” meaning that they attach to any hard surface such as rocks, boats, and docks because of their byssal threads <span class="citation" data-cites="nps_zebramussels_2025">(<a href="#ref-nps_zebramussels_2025" role="doc-biblioref">Knoch 2021</a>)</span>. These mussels may not affect boats in the water for short trips, however, when these things are left in infested water for long periods, like power plant water intakes, it can cause millions of dollars in damage <span class="citation" data-cites="usgs_zebramussels_2025">(<a href="#ref-usgs_zebramussels_2025" role="doc-biblioref">Survey 2025</a>)</span>. Zebra mussels were first brought into the United States in the mid-1980s, and it is hypothesized that they were brought from a cargo ship that ported in the St.&nbsp;Claire River, which connects Lake Erie and Lake Huron. The cargo ship, coming from Europe, dumped its ballast water which in turn dumped the organisms from the freshwater ports in Russia and Ukraine that they are native to. They were first discovered in Lake St.&nbsp;Claire, and quickly spread to the St.&nbsp;Croix and Mississippi Rivers naturally, and further to the west through human transport on boats <span class="citation" data-cites="nps_zebramussels_2025">(<a href="#ref-nps_zebramussels_2025" role="doc-biblioref">Knoch 2021</a>)</span>. Currently, there are some preventative measures for halting the spread of infested waters to non-infested waters such as ensuring personal recreation equipment such as boats, jet skis, and trailers for these items are cleaned, drained, and well-dried before leaving the boat launch. During high-traffic months, there will typically be a USGS or State Department of Natural Resources monitor to inspect the boats that come in and out of the lakes to ensure that the proper safety measures are taken. This process includes inspecting equipment and removing any visible mussels, however, this may be difficult due to their small size, and draining live wells, bilges, and bait buckets of any water before departing. As an owner of this type of recreational equipment, it’s also your duty to ensure that your items are completely dry and washed before entering another body of water <span class="citation" data-cites="ca_water_mussels_2019">(<a href="#ref-ca_water_mussels_2019" role="doc-biblioref">Board 2019</a>)</span>.</p>
<p>Some current control methods are rapid response agencies, public education through signage and monitors at boat launches, as well as some physical, biological, and chemical controls. An example of a physical control measure is water drawdowns in canals and aqueducts which can dry and kill zebra mussels. There is ongoing biological research to determine the natural killers of zebra mussels, and the control measure that our group is interested in researching further is the chemical component that is being taken to kill off these mussels. The research question that we will be testing within the program R is, does the concentration of low-dose copper treatment in the treated St.&nbsp;Albans Bay in Lake Minnetonka in Minnesota affect zebra mussel mortality? We will be comparing this to an untreated Bay in the same lake, called Robinson Bay, and the data has been taken from the USGS website and initial low-dose copper treatment was applied in July of 2019, and ended in October of 2019. The work that we will be conducting is creating visual graphs for this experiment that was done in Lake Minnetonka. The objective was to maintain copper concentrations within St.&nbsp;Albans Bay to 60ug/L in the thermocline of the water for 10 days consecutively. Five testing sites were distinguished by buoys in each Bay. The goal was to target zebra mussel veligers (free-floating offspring) with the copper treatment called Earth Tec QZ <span class="citation" data-cites="mnlra2019copper">(<a href="#ref-mnlra2019copper" role="doc-biblioref">Minnesota Lakes &amp; Rivers Advocates 2019</a>)</span>. This is non-toxic for non-targeted animals within and outside of the lakes <span class="citation" data-cites="univar_earthtec_qz">(<a href="#ref-univar_earthtec_qz" role="doc-biblioref">Univar Solutions n.d.</a>)</span>. The data that will be used comes from the USGS Science-based catalog, which is a trusted website and displays public natural resource information for Lake Minnetonka, specifically, EartchTec QZ concentrations and zebra mussel density as well as mortality. We wanted to pick this lake because the testing zones will experience the same climate, topography, and prevention measures on the lake that are contaminated with zebra mussels. As for the methods, we will be using a log regression, decision tree, or random forest which will help us view the success of EarthTec QZ in St.&nbsp;Albans Bay compared to the control, Robinson Bay. We’ll want to apply regression analysis to view the statistical relationship between the treatments and the observed changes in the mussel population. Additionally, temporal trends will be assessed to evaluate the long-term impact of the control interventions. We will start with our full data, and pull out a sample of the data to be our training set. With the training set, we will be able to create resamples such as 10-fold cross-validation to compare the different models listed above to see which model best fits our data. Ensuring that each model has a specified model and engine. Once ranked, we will be able to decide which model we will use to show the density and mortality of zebra mussels within both lakes in Lake Minnetonka.</p>
<p><em>Materials/Methods:</em></p>
<p>Author: Brittany Bobb, Austin Sharrah</p>
<p>Using datasets from the USGS Science Data Catalog (SDC) publication on copper-based zebra mussel control in Lake Minnetonka, we aim to evaluate the effectiveness of a copper treatment by comparing zebra mussel mortality rates in Lake Minnetonka from before the time of treatment compared to after. This spatially referenced dataset enables us to explore how mussel mortality correlates with copper concentrations across treatment zones, offering insight into potential dose-dependent effects. The first bay, St.&nbsp;Alban’s Bay, is treated using a low-dose copper treatment, and will be compared with another nearby untreated bay, Robinson’s Bay. We mapped changes in zebra mussel distribution over a three month period July 2019 - October 2019, and applied regression analysis to examine the statistical relationship between treatment efforts and observed changes in mussel populations. The specific datasets we are utilizing are the Copper treatment data, Zebra Mussel Settlement data, and the Water Chemistry data. These datasets effectively cover the treatment type, specific bays, copper concentration, replication, time, date, and the water chemistry correlated to a specific data. While the data is largely structured, it did require cleaning such as handling duplicates, standardizing formatting, and addressing missing values. Verifying outliers was also addressed to ensure accurate analysis.</p>
<p>To assess the effectiveness of copper treatment on zebra mussel control, we conducted a series of linear regression analyses using mussel settlement data collected from July to October 2019. Zebra mussel settlement was quantified by measuring the number of settled mussels per square meter (count/m²) at each buoy across both treated and untreated bays. The first regression model examined trends in mussel settlement over time, comparing settlement density (count/m²) with the timing and concentration of copper treatment applications (µg/L). This analysis enabled us to evaluate temporal patterns in response to treatment efforts, with copper application data overlaid to visualize the relationship between treatment events and observed changes in mussel populations. The model produced an R² value of [insert value], indicating the proportion of variation in mussel settlement that can be explained by the timing and concentration of copper applications. A second regression model assessed the relationship between mussel settlement and water chemistry parameters, including temperature and pH, alongside copper concentrations. This model was applied to data collected from individual buoys to account for spatial variability and to identify potential interactions between environmental conditions and treatment efficacy. The second model yielded an R² value of [insert value], reflecting the strength of association between environmental variables and settlement rates. Findings from these models suggest a positive correlation between copper concentration and zebra mussel mortality, with higher copper levels generally associated with reduced mussel settlement rates. These results provide evidence supporting the use of targeted copper treatments as an effective management strategy for zebra mussel populations, while also highlighting the influence of local environmental factors.</p>
<p><em>Results:</em></p>
<p>Author: Tayler Kordiak</p>
<p>After running through multiple linear regression tests and modeling whether or not the Earth Tec QZ impacts the zebra mussel distribution in the Robinson Bay and St.&nbsp;Alban’s Bay of Lake Minnetonka in Minnesota, we are surprised to report that the copper treatment only made a difference in Robinson Bay. After the copper treatment was instilled on July 22nd, we can see that the numbers in the mussel distribution go down significantly around all five testing sites, i.e., all five buoys. As for St.&nbsp;Alban’s Bay, there wasn’t enough significance to say for certain that the copper treatment played a role in affecting the zebra mussel distribution. Additionally, we tested supplemental data such as the water chemistry versus the mussel settlement to test whether the water chemistry had any implication on the mussel distribution. <em>We are actively working on the analysis portion and will update the results and discussion section when completed</em></p>
<p><em>Discussion</em></p>
<p>Author: Lousia Beckett</p>
<p>The goal for this experiment was to keep the copper treatment relatively steady throughout the entire testing process, but we can see where this may have been slightly difficult, considering that the experiment was done in two bays, which were connected to the entirety of the lake. We can assume that this may have been a confounding variable that affected the test results of both Bays.</p>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-ca_water_mussels_2019" class="csl-entry" role="listitem">
Board, California State Water Resources Control. 2019. <span>“Prevent the Spread of Mussels.”</span> <a href="https://water.ca.gov/News/Blog/2019/May-2019/Prevent-the-Spread-of-Mussels">https://water.ca.gov/News/Blog/2019/May-2019/Prevent-the-Spread-of-Mussels</a>.
</div>
<div id="ref-karatayev2002impacts" class="csl-entry" role="listitem">
Karatayev, Alexander Y., Lyubov E. Burlakova, and Dianna K. Padilla. 2002. <span>“Impacts of Zebra Mussels on Aquatic Communities and Their Role as Ecosystem Engineers.”</span> In <em>Invasive Aquatic Species of Europe. Distribution, Impacts and Management</em>, 433–46. Springer. <a href="https://doi.org/10.1007/978-94-015-9956-6_43">https://doi.org/10.1007/978-94-015-9956-6_43</a>.
</div>
<div id="ref-nps_zebramussels_2025" class="csl-entry" role="listitem">
Knoch, S. 2021. <span>“Invasive Zebra Mussels.”</span> <a href="https://www.nps.gov/articles/zebra-mussels.htm">https://www.nps.gov/articles/zebra-mussels.htm</a>.
</div>
<div id="ref-merriamwebster_benthic" class="csl-entry" role="listitem">
Merriam-Webster. n.d. <span>“Benthic.”</span> In <em>Merriam-Webster.com dictionary</em>. <a href="https://www.merriam-webster.com/dictionary/benthic">https://www.merriam-webster.com/dictionary/benthic</a>.
</div>
<div id="ref-mnlra2019copper" class="csl-entry" role="listitem">
Minnesota Lakes &amp; Rivers Advocates. 2019. <span>“Copper Treatment Shows Promise to Control Zebra Mussel Density in Lakes.”</span> <a href="https://mnlakesandrivers.org/copper-treatment-shows-promise-to-control-zebra-mussel-density-in-lakes/" class="uri">https://mnlakesandrivers.org/copper-treatment-shows-promise-to-control-zebra-mussel-density-in-lakes/</a>.
</div>
<div id="ref-usgs_zebramussels_2025" class="csl-entry" role="listitem">
Survey, U. S. Geological. 2025. <span>“What Are Zebra Mussels and Why Should We Care about Them?”</span> <a href="https://www.usgs.gov/faqs/what-are-zebra-mussels-and-why-should-we-care-about-them">https://www.usgs.gov/faqs/what-are-zebra-mussels-and-why-should-we-care-about-them</a>.
</div>
<div id="ref-univar_earthtec_qz" class="csl-entry" role="listitem">
Univar Solutions. n.d. <span>“EarthTec<sup></sup> QZ.”</span> <a href="https://www.univarsolutions.com/product-categories/solvents/additional-solvents/earthtec-qz" class="uri">https://www.univarsolutions.com/product-categories/solvents/additional-solvents/earthtec-qz</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>